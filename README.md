# ğŸ¨ MCP Figma to Code

> Transform your Figma designs into pixel-perfect React + Tailwind components with **100% visual fidelity**

<div align="center">

```ascii

â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—        â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•â•â•  â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—       â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘       â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â•
â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘
â•šâ•â•      â•šâ•â•  â•šâ•â•â•â•â•â•  â•šâ•â•     â•šâ•â• â•šâ•â•  â•šâ•â•       â•šâ•â•     â•šâ•â•  â•šâ•â•â•â•â•â•â•šâ•â•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”´ Design       ğŸŸ£ Components      ğŸŸ¢ Variants      ğŸ”µ Auto Layout    ğŸŸ  Tokens
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                    Model Context Protocol
                    ğŸ¨  Figma Design  â†’  âš¡ AST Processing
                    âš›ï¸  React + Tailwind  â†’  ğŸ“¦ Production Code
                    âœ¨ 100% Visual Fidelity

```

```ascii
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                   â•‘
â•‘     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘     â”‚  FIGMA  â”‚  â”€â”€â”€â”€ MCP Protocol â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚  REACT  â”‚      â•‘
â•‘     â”‚ DESIGN  â”‚                                  â”‚   CODE  â”‚      â•‘
â•‘     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘          â”‚                                            â”‚           â•‘
â•‘          â”‚  1. Extract Design Data                    â”‚           â•‘
â•‘          â”‚  2. AST Processing                         â”‚           â•‘
â•‘          â”‚  3. Visual Validation                      â”‚           â•‘
â•‘          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 100% Fidelity â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”˜           â•‘
â•‘                                                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![React](https://img.shields.io/badge/React-19-61DAFB?logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5-3178C6?logo=typescript)](https://www.typescriptlang.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3-38B2AC?logo=tailwind-css)](https://tailwindcss.com/)
[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?logo=docker)](https://www.docker.com/)

[Features](#-features) â€¢ [Quick Start](#-quick-start) â€¢ [How It Works](#-how-it-works) â€¢ [Documentation](#-documentation) â€¢ [Examples](#-examples)

</div>

---

## âš ï¸ Project Status - MVP

> **This is a Minimum Viable Product (MVP)** in active development. I will continuously improve the codebase.

### ğŸš€ What Works Great
- âœ… Basic to complex Figma layouts
- âœ… Gradients, shadows, and blend modes
- âœ… Design token extraction
- âœ… Visual validation pipeline
- âœ… MCP integration with Claude Code

### ğŸ”§ Known Limitations & Future Improvements
- âš ï¸ Some edge cases in complex nested components
- âš ï¸ Advanced Figma features (variants, auto-layout edge cases)
- âš ï¸ Animation and interaction states
- âš ï¸ Component library mapping

### ğŸ¤ We Welcome Contributions!

This project is **open-source** and we'd love your help to make it better! Whether you're fixing bugs, adding features, improving documentation, or reporting issues - **all contributions are welcome**.

**Ways to contribute:**
- ğŸ› Report bugs and edge cases you encounter
- ğŸ’¡ Suggest new features or improvements
- ğŸ”¨ Submit pull requests with fixes or enhancements
- ğŸ“š Improve documentation and examples
- â­ Star the repo if you find it useful!

**Join us in building the best Figma-to-code tool!** Check the [Contributing](#-contributing) section for more details.

---

## ğŸŒŸ Features

### ğŸ¯ Pixel-Perfect Conversion
- **100% Visual Fidelity** - Automated visual validation ensures the generated code matches Figma designs exactly
- **Smart AST Processing** - Advanced Babel-based transformations optimize the generated code
- **Gradient & Shape Support** - Handles complex gradients, radial gradients, and custom shapes
- **Design Token Extraction** - Automatic CSS variables for colors, spacing, and typography

### ğŸš€ Production-Ready Output
- **React 19 + TypeScript** - Modern React components with full TypeScript support
- **Tailwind CSS** - Optimized utility classes with automatic cleanup
- **Google Fonts Integration** - Auto-detection and import of custom fonts
- **Responsive by Default** - Built-in responsive testing interface

### ğŸ“Š Comprehensive Reports
- **Visual Comparison** - Side-by-side Figma vs Web screenshots
- **Technical Analysis** - Detailed markdown documentation of all transformations
- **Interactive Dashboard** - Beautiful UI to manage and review all your conversions
- **Fidelity Metrics** - Quantified report of processing stats and fixes applied

### ğŸ”§ Developer Experience
- **MCP Protocol** - Leverages Model Context Protocol for seamless Figma integration
- **Docker Support** - One-command setup with Docker Compose
- **Hot Reload** - Instant feedback during development
- **Chunking for Large Designs** - Automatically handles massive Figma files

---

## ğŸ“‹ Table of Contents

- [Prerequisites](#-prerequisites)
- [First-Time Setup with Claude Code](#-first-time-setup-with-claude-code)
- [Quick Start](#-quick-start)
- [How It Works](#-how-it-works)
- [Usage](#-usage)
- [Architecture](#-architecture)
- [Configuration](#-configuration)
- [Examples](#-examples)
- [Troubleshooting](#-troubleshooting)
- [Contributing](#-contributing)
- [License](#-license)

---

## ğŸ”§ Prerequisites

Before you begin, ensure you have the following installed:

| Tool | Version | Purpose |
|------|---------|---------|
| **Docker** | Latest | Container runtime (recommended) |
| **Docker Compose** | Latest | Container orchestration |
| **MCP Figma Desktop** | Latest | Figma integration server |
| **Node.js** (optional) | 18+ | For local development |
| **Claude Code** (optional) | Latest | For `/analyze-mcp` command |

### Setting Up MCP Figma Desktop

The MCP Figma Desktop server must be running on port 3845:

```bash
# Install MCP Figma Desktop
# Follow instructions at: https://developers.figma.com/docs/figma-mcp-server/local-server-installation/

# Start the server
# The server should be accessible at http://localhost:3845
```

---

## ğŸ¯ First-Time Setup with Claude Code

**If you're setting up this repository for the first time**, follow these steps to use the powerful `/analyze-mcp` command with Claude Code.

### 1. Install Claude Code

Claude Code is Anthropic's official CLI for Claude that enables seamless integration with this project.

```bash
# Install Claude Code
npm install -g @anthropic-ai/claude-code

# Or with Homebrew (macOS/Linux)
brew install claude-code
```

ğŸ“š **Full installation guide**: [Claude Code Documentation](https://docs.claude.com/en/docs/claude-code)

### 2. Launch Claude Code

You should launch Claude Code in this repository directory:

```bash
# Navigate to the project root
cd /path/to/mcp-figma-to-code

# Launch Claude Code
claude
```

Claude Code will start an interactive session in your terminal. You can now chat with Claude and use slash commands.

### 3. Configure MCP Server

Before using the `/analyze-mcp` command, you need to add the Figma MCP server to Claude Code.

#### Check if MCP Server is Already Configured

```bash
# Inside Claude Code, list configured MCP servers
claude mcp list
```

#### Add Figma Desktop MCP Server (if not present)

If you don't see `figma-desktop` in the list, add it:

```bash
# Add the Figma Desktop MCP server
claude mcp add --transport http figma-desktop http://127.0.0.1:3845/mcp
```

This connects Claude Code to the Figma MCP server running on your local machine (port 3845).

ğŸ“š **Learn more about MCP**: [Figma MCP Server Documentation](https://developers.figma.com/docs/figma-mcp-server/local-server-installation/)

### 4. Verify MCP Connection

Once configured, Claude Code will display the connection status:

```
âœ“ MCP Connected: figma-desktop
```

If you see `âŒ MCP Disconnected`, ensure:
- The Figma Desktop app is running
- The MCP server is running on port 3845
- No firewall is blocking localhost connections

### 5. Use the `/analyze-mcp` Command

Now you're ready to analyze Figma designs! ğŸ‰

```bash
# In Claude Code, use the slash command
/analyze-mcp https://www.figma.com/design/YOUR_FILE_ID?node-id=X-Y
```

**What happens next:**
1. ğŸ¨ **Phase 1: Extraction** - Claude fetches design data, screenshot, variables, and metadata from Figma via MCP
2. âš™ï¸ **Phase 2: Processing** - Organizes images, applies AST transformations, fixes CSS variables
3. âœ… **Phase 3: Validation** - Captures web screenshot and compares with Figma design
4. ğŸ“¦ **Phase 4: Output** - Generates React component, CSS file, reports, and metadata

### Example Workflow

```bash
# 1. Launch Claude Code in the project directory
cd /path/to/mcp-figma-to-code
claude

# 2. Analyze a Figma design
> /analyze-mcp https://www.figma.com/design/ABC123?node-id=104-13741

# Claude will process the design and generate:
# âœ… src/generated/tests/node-104-13741/Component-fixed.tsx
# âœ… src/generated/tests/node-104-13741/Component-fixed.css
# âœ… src/generated/tests/node-104-13741/img/ (organized images)
# âœ… src/generated/tests/node-104-13741/metadata.json
# âœ… src/generated/tests/node-104-13741/analysis.md
# âœ… src/generated/tests/node-104-13741/report.html
# âœ… src/generated/tests/node-104-13741/figma-render.png
# âœ… src/generated/tests/node-104-13741/web-render.png

# 3. View the result in the dashboard
# Open http://localhost:5173 (if Docker is running)
```

### Alternative: Natural Language Commands

You can also use natural language instead of the slash command:

```bash
> Analyze this Figma URL: https://www.figma.com/design/ABC123?node-id=104-13741
```

Claude will automatically detect the Figma URL and trigger the `/analyze-mcp` workflow.

---

## ğŸš€ Quick Start

### Option 1: Docker (Recommended)

```bash
# 1. Clone the repository
git clone https://github.com/vincegx/Figma-to-Code---MCP-tools.git
cd Figma-to-Code---MCP-tools

# 2. Start the application
docker-compose up --build

# 3. Open your browser
# http://localhost:5173
```

That's it! ğŸ‰ The dashboard is now running.

### Option 2: Local Development

```bash
# 1. Clone the repository
git clone https://github.com/vincegx/Figma-to-Code---MCP-tools.git
cd Figma-to-Code---MCP-tools

# 2. Install dependencies
npm install

# 3. Start the dev server
npm run dev

# 4. Open your browser
# http://localhost:5173
```

---

## ğŸ¯ How It Works

```ascii
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FIGMA TO CODE PIPELINE                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PHASE 1   â”‚  EXTRACTION MCP SERVER (Local MCP)
    â”‚  ğŸ“¥ Figma   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â–º get_design_context    â†’ React + Tailwind Code
           â”œâ”€â–º get_screenshot        â†’ Figma PNG (validation)
           â”œâ”€â–º get_variable_defs     â†’ Design Tokens (colors, fonts)
           â””â”€â–º get_metadata          â†’ XML Hierarchy
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PHASE 2   â”‚  PROCESSING
    â”‚  âš™ï¸  AST    â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â–º organize-images       â†’ img/ folder with Figma names
           â”œâ”€â–º unified-processor     â†’ AST transformations
           â”‚   â”œâ”€ Font detection    â†’ Convert to inline styles
           â”‚   â”œâ”€ Class cleaning    â†’ Remove invalid Tailwind
           â”‚   â”œâ”€ SVG fixes         â†’ Flatten & inline composites
           â”‚   â”œâ”€ Gradient fixes    â†’ Multi-stop & radial gradients
           â”‚   â”œâ”€ CSS variables     â†’ Convert var(--x) to values
           â”‚   â””â”€ Tailwind optimize â†’ Arbitrary â†’ Standard classes
           â””â”€â–º fix-svg-vars         â†’ Fix SVG CSS variables
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PHASE 3   â”‚  VALIDATION
    â”‚  âœ… Visual  â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â–º capture-web-screenshot â†’ Web render PNG
           â”œâ”€â–º visual-comparison      â†’ Figma vs Web
           â””â”€â–º apply-fixes            â†’ Corrections if needed
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PHASE 4   â”‚  OUTPUT
    â”‚  ğŸ“¦ Files   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â–º Component-fixed.tsx    â†’ Production-ready component
           â”œâ”€â–º Component-fixed.css    â†’ Fonts + CSS variables
           â”œâ”€â–º metadata.json          â†’ Test metadata
           â”œâ”€â–º analysis.md            â†’ Technical report
           â””â”€â–º report.html            â†’ Visual fidelity report
```

### ğŸ”¬ Processing Details

#### 1. **Single-Pass AST Traversal**
Instead of parsing the code multiple times, all transformations run in **one pass** for optimal performance:

- Font detection (before class cleaning)
- Class cleaning & optimization
- SVG structure fixes
- Gradient & shape corrections
- CSS variable conversion
- Tailwind optimization

#### 2. **Smart Chunking**
For large Figma designs (>25k tokens), the system automatically:
- Detects child nodes from metadata
- Processes each chunk sequentially
- Assembles chunks into a parent component

#### 3. **Visual Validation**
Ensures 100% fidelity by:
- Capturing Figma's official screenshot
- Rendering the component in Puppeteer
- Visual side-by-side comparison
- Automatic or manual corrections

---

## ğŸ’» Usage

### Method 1: Claude Code Slash Command (Recommended) â­

**This is the easiest and most powerful way to use this tool.**

#### Prerequisites
1. Complete the [First-Time Setup with Claude Code](#-first-time-setup-with-claude-code)
2. Ensure Docker is running: `docker-compose up` (in a separate terminal)
3. Make sure the Figma Desktop app is running with MCP server on port 3845

#### Using the `/analyze-mcp` Command

Once you're in Claude Code (launched with `claude` in the project directory), simply run:

```bash
# Slash command method (recommended)
/analyze-mcp https://www.figma.com/design/YOUR_FILE?node-id=X-Y
```

**Or use natural language:**
```bash
# Natural language method
> Analyze this Figma design: https://www.figma.com/design/YOUR_FILE?node-id=X-Y
```

#### What Happens During Analysis

Claude Code will automatically:

1. **ğŸ”Œ Connect to MCP** - Verifies connection to Figma Desktop MCP server
2. **ğŸ“¥ Extract Design** (Phase 1) - Fetches React code, screenshot, variables, and metadata via MCP
3. **âš™ï¸ Process Code** (Phase 2) - Organizes images, runs AST transformations, fixes CSS variables
4. **âœ… Validate** (Phase 3) - Captures web screenshot and compares with Figma design
5. **ğŸ“¦ Generate Output** (Phase 4) - Creates all files and reports

#### What You Get

After analysis completes, you'll have a complete test folder with:

- âœ… **Component-fixed.tsx** - Production-ready React component
- âœ… **Component-fixed.css** - Optimized CSS with Google Fonts + design tokens
- âœ… **img/** folder - All images organized with Figma layer names
- âœ… **metadata.json** - Test metadata for dashboard
- âœ… **analysis.md** - Technical documentation (transformations applied)
- âœ… **report.html** - Visual fidelity report with metrics
- âœ… **figma-render.png** - Figma screenshot (reference)
- âœ… **web-render.png** - Web screenshot (validation)

#### Viewing the Result

Once the analysis is complete, open the dashboard:

```bash
# The dashboard should already be running (docker-compose up)
# Open in your browser:
http://localhost:5173
```

Click on your test to see:
- ğŸ¨ **Preview Tab** - Live component with responsive testing
- ğŸ’» **Code Tab** - Syntax-highlighted source code
- ğŸ“Š **Report Tab** - HTML fidelity report
- ğŸ”§ **Technical Tab** - Detailed analysis markdown

### Method 2: CLI (Advanced)

Execute the processing pipeline manually:

```bash
# Inside Docker container
docker exec mcp-figma-v1 node scripts/unified-processor.js \
  src/generated/tests/node-{nodeId}/Component.tsx \
  src/generated/tests/node-{nodeId}/Component-fixed.tsx \
  src/generated/tests/node-{nodeId}/metadata.xml \
  "https://figma.com/design/..."

# Capture web screenshot
docker exec mcp-figma-v1 node scripts/capture-web-screenshot.js \
  src/generated/tests/node-{nodeId} 5173
```

---

## ğŸ—ï¸ Architecture

### Project Structure

```
mcp-figma-to-code/
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ components/          # Dashboard UI components
â”‚   â”‚   â”œâ”€â”€ HomePage.tsx        # Test list view
â”‚   â”‚   â””â”€â”€ TestDetail.tsx      # Test detail with 4 tabs
â”‚   â”œâ”€â”€ ğŸ“ generated/tests/     # Generated outputs (git-ignored)
â”‚   â”‚   â””â”€â”€ node-{nodeId}/      # One folder per analysis
â”‚   â”‚       â”œâ”€â”€ Component.tsx            # Original generated
â”‚   â”‚       â”œâ”€â”€ Component-fixed.tsx      # Post-processed
â”‚   â”‚       â”œâ”€â”€ Component-fixed.css      # Extracted styles
â”‚   â”‚       â”œâ”€â”€ ğŸ“ img/                  # Organized images
â”‚   â”‚       â”œâ”€â”€ variables.json           # Design tokens
â”‚   â”‚       â”œâ”€â”€ metadata.xml             # Figma hierarchy
â”‚   â”‚       â”œâ”€â”€ metadata.json            # Dashboard metadata
â”‚   â”‚       â”œâ”€â”€ analysis.md              # Technical report
â”‚   â”‚       â”œâ”€â”€ report.html              # Visual report
â”‚   â”‚       â”œâ”€â”€ figma-render.png         # Figma screenshot
â”‚   â”‚       â””â”€â”€ web-render.png           # Web screenshot
â”‚   â”œâ”€â”€ App.tsx
â”‚   â””â”€â”€ main.tsx
â”œâ”€â”€ ğŸ“ scripts/                 # Processing pipeline
â”‚   â”œâ”€â”€ unified-processor.js            # Main AST processor
â”‚   â”œâ”€â”€ organize-images.js              # Image organization
â”‚   â”œâ”€â”€ fix-svg-vars.js                 # SVG variable fixes
â”‚   â”œâ”€â”€ capture-web-screenshot.js       # Web screenshot capture
â”‚   â”œâ”€â”€ mcp-direct-save.js              # Chunking utilities
â”‚   â””â”€â”€ ğŸ“ transformations/             # Modular AST transforms
â”‚       â”œâ”€â”€ ast-cleaning.js             # Class cleanup
â”‚       â”œâ”€â”€ post-fixes.js               # Gradient/shape fixes
â”‚       â”œâ”€â”€ css-vars.js                 # CSS variable conversion
â”‚       â”œâ”€â”€ tailwind-optimizer.js       # Tailwind optimization
â”‚       â””â”€â”€ svg-icon-fixes.js           # SVG structure fixes
â”œâ”€â”€ ğŸ“ .claude/                 # Claude Code integration
â”‚   â””â”€â”€ ğŸ“ commands/
â”‚       â””â”€â”€ analyze-mcp.md              # /analyze-mcp command
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ package.json
â”œâ”€â”€ CLAUDE.md                   # AI assistant guidance
â””â”€â”€ README.md                   # This file
```

### Tech Stack

| Layer | Technology |
|-------|------------|
| **Frontend** | React 19, TypeScript, Tailwind CSS, Vite |
| **Processing** | Babel (AST), Puppeteer (screenshots) |
| **Integration** | MCP Protocol, Figma API |
| **Infrastructure** | Docker, Docker Compose, Alpine Linux |
| **Code Quality** | ESLint, React Hooks Linting |

---

## âš™ï¸ Configuration

### Environment Variables

Create a `.env` file (optional):

```env
# Development
NODE_ENV=development

# Puppeteer
PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium

# MCP Server (if different from default)
MCP_SERVER_HOST=host.docker.internal
MCP_SERVER_PORT=3845
```

### Docker Configuration

The `docker-compose.yml` uses:
- **Port 5173**: Dashboard access
- **Volumes**: Hot reload for `src/` and `scripts/`
- **extra_hosts**: Access to MCP server on host via `host.docker.internal`

### Customizing Transformations

Modify transformations in `scripts/transformations/`:

```javascript
// Example: Add custom class optimization
// scripts/transformations/ast-cleaning.js

export function customOptimization(path) {
  // Your AST transformation logic
  const className = getClassNameAttribute(path)
  if (className.includes('my-pattern')) {
    // Apply fix
    return true
  }
  return false
}
```

---

## ğŸ“¸ Examples

### Input: Figma Design
```
https://www.figma.com/design/ABC123?node-id=104-13741
```

### Output: React Component
```tsx
import React from 'react';
import './Component-fixed.css';

export default function HeroSection() {
  return (
    <div className="flex flex-col items-center gap-8 px-12 py-16">
      <h1 className="text-5xl font-bold text-gray-900">
        Welcome to Our Product
      </h1>
      <p className="text-lg text-gray-600 max-w-2xl text-center">
        Build amazing experiences with pixel-perfect designs
      </p>
      <button className="px-6 py-3 bg-purple-600 text-white rounded-lg
                         hover:bg-purple-700 transition-colors">
        Get Started
      </button>
    </div>
  );
}
```

### Output: CSS File
```css
/* Auto-generated design tokens from Figma */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

:root {
  /* Colors */
  --colors-primary: #7C3AED;
  --colors-gray-900: #111827;
  --colors-gray-600: #4B5563;

  /* Spacing */
  --spacing-lg: 32px;
  --spacing-xl: 64px;
}

/* Figma-specific utility classes */
.content-start {
  align-content: flex-start;
}
```

### Dashboard Preview

```ascii
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¨ MCP Figma Analyzer                    âœ“ MCP Connected   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ğŸ’¡ Comment lancer une nouvelle analyse                      â”‚
â”‚  Option 1: /analyze-mcp URL_FIGMA                           â”‚
â”‚  Option 2: "Analyse cette URL Figma : URL"                  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ ğŸ¨        â”‚  â”‚ ğŸ¨        â”‚  â”‚ ğŸ¨        â”‚               â”‚
â”‚  â”‚ Hero      â”‚  â”‚ Pricing   â”‚  â”‚ Footer    â”‚               â”‚
â”‚  â”‚ Section   â”‚  â”‚ Cards     â”‚  â”‚ Component â”‚               â”‚
â”‚  â”‚           â”‚  â”‚           â”‚  â”‚           â”‚               â”‚
â”‚  â”‚ ğŸ“¦ 245    â”‚  â”‚ ğŸ“¦ 189    â”‚  â”‚ ğŸ“¦ 156    â”‚               â”‚
â”‚  â”‚ ğŸ–¼ï¸ 12     â”‚  â”‚ ğŸ–¼ï¸ 8      â”‚  â”‚ ğŸ–¼ï¸ 6      â”‚               â”‚
â”‚  â”‚           â”‚  â”‚           â”‚  â”‚           â”‚               â”‚
â”‚  â”‚ [DÃ©tails] â”‚  â”‚ [DÃ©tails] â”‚  â”‚ [DÃ©tails] â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› Troubleshooting

### MCP Server Not Found

**Problem**: `âŒ MCP Disconnected`

**Solution**:
```bash
# Check if MCP server is running
curl http://localhost:3845/health

# Restart MCP Figma Desktop server
# Follow the MCP Figma Desktop documentation
```

### Docker Container Won't Start

**Problem**: `Error: Cannot connect to the Docker daemon`

**Solution**:
```bash
# Start Docker Desktop
# Then retry:
docker-compose up --build
```

### Component Won't Load in Dashboard

**Problem**: `Error loading component`

**Solution**:
```bash
# Check if the component file exists
ls src/generated/tests/node-{nodeId}/Component-fixed.tsx

# Check for syntax errors
docker exec mcp-figma-v1 npm run lint
```

### Large Figma Files Timeout

**Problem**: `get_design_context` fails with >25k tokens

**Solution**: The system automatically handles this with chunking. If it fails:
```bash
# Manually extract chunks
docker exec mcp-figma-v1 node scripts/mcp-direct-save.js \
  extract-nodes src/generated/tests/node-{nodeId}/metadata.xml
```

### Fonts Not Loading

**Problem**: Custom fonts don't appear in the web render

**Solution**:
```bash
# Check variables.json for font definitions
cat src/generated/tests/node-{nodeId}/variables.json

# Check generated CSS file
cat src/generated/tests/node-{nodeId}/Component-fixed.css

# Verify Google Fonts import in CSS
```

---

## ğŸ¤ Contributing

Contributions are welcome! Here's how you can help:

### Reporting Bugs

1. Check if the issue already exists
2. Create a new issue with:
   - Clear description
   - Steps to reproduce
   - Expected vs actual behavior
   - Screenshots if applicable

### Suggesting Features

1. Open an issue with the `enhancement` label
2. Describe the feature and use case
3. Explain why it would be valuable

### Submitting Pull Requests

```bash
# 1. Fork the repository
# 2. Create a feature branch
git checkout -b feature/amazing-feature

# 3. Make your changes
# 4. Test thoroughly
npm run lint
npm run build

# 5. Commit with clear messages
git commit -m "Add amazing feature"

# 6. Push to your fork
git push origin feature/amazing-feature

# 7. Open a Pull Request
```

### Development Guidelines

- Follow the existing code style
- Add comments for complex logic
- Update documentation for new features
- Test with multiple Figma designs
- Ensure Docker build succeeds

---

## ğŸ“š Documentation

- **[CLAUDE.md](./CLAUDE.md)** - Guidance for AI assistants working with this codebase
- **[MCP Protocol](https://github.com/anthropics/mcp)** - Model Context Protocol documentation
- **[Figma API](https://www.figma.com/developers/api)** - Figma REST API reference
- **[Babel AST](https://babeljs.io/docs/en/babel-parser)** - AST parsing documentation
- **[Tailwind CSS](https://tailwindcss.com/docs)** - Tailwind utility classes

---

## ğŸ“ Learn More

### How AST Processing Works

The unified processor uses Babel to:
1. Parse React/JSX code into an Abstract Syntax Tree
2. Traverse the tree once (performance optimization)
3. Apply multiple transformations during the single pass
4. Generate optimized code from the modified AST

```javascript
// Example transformation
traverse(ast, {
  JSXElement(path) {
    // Find className attribute
    // Detect patterns (e.g., font-['Poppins:Bold'])
    // Transform to inline styles
    // Optimize Tailwind classes
  }
})
```

### Why MCP?

The Model Context Protocol enables:
- **Direct Figma Access**: No API keys or authentication needed
- **Rich Context**: Get design hierarchy, variables, and screenshots
- **AI Integration**: Works seamlessly with Claude Code
- **Type Safety**: Structured data extraction

---

## ğŸ“„ License

This project is licensed under the **MIT License** - see the [LICENSE](LICENSE) file for details.

```
MIT License

Copyright (c) 2025 MCP Figma to Code Contributors

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction...
```

---

## ğŸ™ Acknowledgments

- **Anthropic** - For the Model Context Protocol and Claude Code
- **Figma** - For the amazing design tool and API
- **React Team** - For React 19
- **Tailwind Labs** - For Tailwind CSS
- **Babel Team** - For the AST tooling
- **All Contributors** - Thank you! ğŸ‰

---

## ğŸ“ Support

- ğŸ› **Issues**: [GitHub Issues](https://github.com/vincegx/Figma-to-Code---MCP-tools/issues)
- ğŸ’¬ **Discussions**: [GitHub Discussions](https://github.com/vincegx/Figma-to-Code---MCP-tools/discussions)

---

<div align="center">

**[â¬† Back to Top](#-mcp-figma-to-code)**

Made with â¤ï¸ by the MCP Figma to Code team

â­ **Star this repo** if you find it useful!

</div>
